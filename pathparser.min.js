/* Copyright (c) 2014 Dan Stillman - MIT License - https://github.com/dstillman/pathparser.js */
!function(r){"function"==typeof define&&define.amd?define(r):"object"==typeof exports?module.exports=r():~String(this).indexOf("BackstagePass")?(EXPORTED_SYMBOLS=["PathParser"],PathParser=r()):PathParser=r()}(function(){"use strict";var r=function(r){this.rules=[],this.params=r};return r.prototype=function(){function r(r,t,e){for(var n={},s={},a=0;a<r.parts.length;a++){var i=r.parts[a],u=t[a];if(void 0!==u){if(":"==i.charAt(0)){n[i.substr(1)]=u;continue}if(i!==u)return!1}else{if(":"!=i.charAt(0))return!1;s[i.substr(1)]=!0}}for(var a=0;a<e.length;a++){var l=e[a].split("=",2),f=l[0];2!=l.length||n[f]||s[f]||(n[f]=l[1])}return n}return{add:function(r,t){this.rules.push({parts:r.replace(/^\//,"").split("/"),handler:t})},run:function(t){t.length&&(t=t.replace(/\/+/g,"/").replace(/^\/|\/($|\?)/,"").replace(/#.*$/,""));for(var e=t.split("?",2),n=e[0].split("/",50),s=e[1]?e[1].split("&",50):[],a=0;a<this.rules.length;a++){var i=this.rules[a],u=r(i,n,s);if(u){if(u.url=t,this.params)for(var l in u)this.params[l]=u[l];return i.handler&&i.handler.call(u),!0}}return!1}}}(),r});